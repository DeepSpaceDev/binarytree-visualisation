<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../paper-header-panel/paper-header-panel.html">
<link rel="import" href="../paper-toolbar/paper-toolbar.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-toast/paper-toast.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-fab/paper-fab.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="binary-tree.html">
<link rel="import" href="binary-node.html">

<link rel="stylesheet" type="text/css" href="main.css">

<!--
An element for visualising a binary tree and perform different operations on it.

Example:

    <binarytree-visualisation></binarytree-visualisation>

@demo demo/index.html
@hero hero.svg
-->

<dom-module id="binarytree-visualisation">
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        --paper-header-panel-body {
          background: #E0E0E0;
        }
        --primary-color: #FBC02D;
        --dark-primary-color: #FBC02D;
        --light-primary-color: #FFF9C4;

        --accent-color: #00BCD4;

        --default-primary-color: var(--primary-color);
      }
      paper-dialog {
        padding: 16px;
      }
      paper-fab {
        position: absolute;
        bottom: 16px;
        right: 16px;
      }
      section {
        width: calc(100% + 16px)
      }
    </style>
    <paper-toast id="noVal" text="Please provide an value"></paper-toast>

    <paper-dialog id="addTreeDialog" modal>
      <h2>Please insert a value and a name for the root node</h2>
      <paper-dialog-scrollable>
        <paper-input label="name" value="{{_name}}" required></paper-input>
        <paper-input label="value" value="{{_value}}" required></paper-input>
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button dialog-confirm>Add Tree</paper-button>
      </div>
    </paper-dialog>

    <paper-drawer-panel>
      <paper-header-panel drawer>
        <paper-toolbar>
          <paper-icon-button 
            icon="arrow-back" 
            style="color: white;"
            paper-drawer-toggle>
          </paper-icon-button>
        </paper-toolbar>
        <paper-item>
          <canvas id="root" width="48" height="48" item-icon></canvas>
          <div>Root</div>
        </paper-item>
        <paper-item>
          <canvas id="node" width="48" height="48" item-icon></canvas>
          <div>Node</div>
        </paper-item>
        <paper-item>
          <canvas id="branch" width="48" height="48" item-icon></canvas>
          <div>Branch</div>
        </paper-item>
        <paper-item>
          <canvas id="parent" width="48" height="48" item-icon></canvas>
          <div>Parent</div>
        </paper-item>
        <paper-item>
          <canvas id="child" width="48" height="48" item-icon></canvas>
          <div>Child</div>
        </paper-item>
        <paper-item>
          <canvas id="sibling" width="48" height="48" item-icon></canvas>
          <div>Sibbling</div>
        </paper-item>
        <paper-item>
          <canvas id="leaf" width="48" height="48" item-icon></canvas>
          <div>Leaf</div>
        </paper-item>
      </paper-header-panel>
      <paper-header-panel main>
        <paper-toolbar>
          <paper-icon-button icon="view-list" paper-drawer-toggle>
          </paper-icon-button>
        </paper-toolbar>
        <section id="treeContainer">
          
        </section>
      </paper-header-panel>
    </paper-drawer-panel>

    <paper-fab icon="add" on-tap="addTree"></paper-fab>
  </template>

  <script type="text/javascript" src="main.js"></script>
  <script>
    Polymer({
      is: 'binarytree-visualisation',

      properties: {
        
      },

      listeners: {
        'iron-overlay-closed': '_addTree'
      },

      attached: function() {
        drawRoot(this.$.root);
        drawNode(this.$.node);
        drawBranch(this.$.branch);
        drawParent(this.$.parent);
        drawChild(this.$.child);
        drawSibling(this.$.sibling);
        drawLeaf(this.$.leaf);
      },

      addTree: function() {
        this.$.addTreeDialog.open();
      },

      _addTree: function (e) {
        if(e.target.id === 'addTreeDialog') {
          if(e.detail.confirmed && this._value !== '') {
            var tree = document.createElement('binary-tree');
            console.log(tree.tree);
            tree.$.tree.value = this._value;
            tree.tree.value = this._value;
            tree.name = this._name;
            console.log(tree.tree);
            this.$.treeContainer.appendChild(tree);
            this._value = '';
            this._name = '';
          } else {
            if(this._value === '' && e.detail.confirmed)
              this.$.noVal.show();
          }
        }
      },

      searchForElement: function (value) {
        return this.inOrder(this.tree, value);
      },

      inOrder: function(node, value) {
        /*var result = null;

        if(node.left != null)
          result = this.inOrder(node.left, value);
        if(node.value == value)
          return node;
        if(node.right != null)
          result = this.inOrder(node.right, value);
        return result;*/
      }
    });
  </script>
</dom-module>
